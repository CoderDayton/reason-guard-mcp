# Reason Guard MCP Server Environment Variables
# Copy to .env and customize for your deployment.
#
# For complete reference with all options, see:
# https://github.com/coderdayton/reason-guard-mcp/blob/main/ENVIRONMENT_VARIABLES.md

# =============================================================================
# Server Configuration
# =============================================================================

# Transport mode: stdio | http | sse (default: stdio)
# - stdio: Local IDE integration (Claude Desktop, Cursor, VS Code)
# - http: REST API for production deployments
# - sse: Server-Sent Events for streaming
# SERVER_TRANSPORT=stdio

# Host for http/sse transport (default: 127.0.0.1)
# Use 0.0.0.0 for Docker/Kubernetes deployments
# SERVER_HOST=127.0.0.1

# Port for http/sse transport (default: 8000)
# SERVER_PORT=8000

# Server name shown to MCP clients (default: Reason-Guard-MCP)
# SERVER_NAME=Reason-Guard-MCP

# =============================================================================
# Embedding Model Configuration
# =============================================================================

# Embedding model for compression tool (default: Snowflake/snowflake-arctic-embed-xs)
# Models are downloaded from HuggingFace on first use.
#
# Lightweight (CI/Development):
#   Snowflake/snowflake-arctic-embed-xs  (~90MB, fast)
#   sentence-transformers/all-MiniLM-L6-v2 (~80MB)
#
# Production Quality:
#   sentence-transformers/all-mpnet-base-v2 (~420MB, high quality)
#   BAAI/bge-small-en-v1.5 (~130MB, good balance)
#
# EMBEDDING_MODEL=Snowflake/snowflake-arctic-embed-xs

# Model revision for supply chain security (default: main)
# Pin to a commit hash for reproducible production builds
# EMBEDDING_MODEL_REVISION=main

# Custom directory for embedding model cache
# Useful for shared volumes or faster storage
# EMBEDDING_CACHE_DIR=~/.cache/reason-guard-mcp/models/

# =============================================================================
# Logging
# =============================================================================

# Log level: DEBUG | INFO | WARNING | ERROR (default: INFO)
# LOG_LEVEL=INFO

# Log format: text | json (default: text)
# Use json for log aggregators (Datadog, Splunk, ELK)
# LOG_FORMAT=text

# Optional log file path (in addition to stdout)
# LOG_FILE=/var/log/reason-guard/server.log

# =============================================================================
# Session & Rate Limits
# =============================================================================

# Maximum concurrent sessions (default: 500)
# MAX_TOTAL_SESSIONS=500

# Maximum steps per session (default: 1000)
# MAX_THOUGHTS_PER_SESSION=1000

# Session timeout in minutes (default: 60)
# SESSION_MAX_AGE_MINUTES=60

# Rate limit: new sessions per window (default: 100)
# RATE_LIMIT_MAX_SESSIONS=100

# Rate limit window in seconds (default: 60)
# RATE_LIMIT_WINDOW_SECONDS=60

# =============================================================================
# Authentication (Production)
# =============================================================================

# Enable API key authentication (default: false)
# Always enable for production HTTP/SSE deployments
# AUTH_ENABLED=false

# API keys (comma-separated) - use strong random keys
# REASONGUARD_API_KEYS=sk-your-secret-key-here

# Or load from file (one key per line, preferred for secrets management)
# REASONGUARD_API_KEYS_FILE=/run/secrets/api_keys

# Allow unauthenticated localhost requests (default: true)
# Disable in production/container environments
# AUTH_BYPASS_LOCALHOST=true

# Trusted proxy CIDR ranges for X-Forwarded-For headers
# Required when behind load balancer
# TRUSTED_PROXIES=10.0.0.0/8,172.16.0.0/12

# =============================================================================
# Observability & Metrics
# =============================================================================

# Enable SQLite metrics collection (default: false)
# REASONGUARD_METRICS_ENABLED=false

# Metrics database path (default: :memory:)
# REASONGUARD_METRICS_DB=/data/metrics.db

# Metrics retention in hours (default: 24)
# REASONGUARD_METRICS_RETENTION_HOURS=24

# Database rotation threshold in MB (default: 100)
# REASONGUARD_METRICS_ROTATION_MB=100

# Number of rotated archives to keep (default: 3)
# REASONGUARD_METRICS_ROTATION_KEEP=3
